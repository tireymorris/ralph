#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative '../lib/ralph/agent'
require_relative '../lib/ralph/cli'

if __FILE__ == $PROGRAM_NAME
  begin
    exit_code = Ralph::CLI.run(ARGV)
    exit(exit_code || 0)
  rescue Interrupt
    puts "\n\nâš ï¸ Interrupted by user"
    puts "ğŸ’¡ Run './bin/ralph --resume' to continue"
    exit 130
  rescue StandardError => e
    puts "\nâŒ Fatal error: #{e.message}"
    puts e.backtrace.first(5).map { |line| "  #{line}" }.join("\n") if ENV['DEBUG']
    exit 1
  end
end
